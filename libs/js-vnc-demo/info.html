&nbsp;<article class="post" style="box-sizing: border-box; border: 0px; font-variant-numeric: inherit; font-variant-east-asian: inherit; font-stretch: inherit; font-size: 16px; line-height: inherit; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; vertical-align: baseline; margin: auto; padding: 0px; color: rgb(102, 102, 102);">
<header style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; text-align: center;">
<h1 style="box-sizing: border-box; border: 0px; font-variant-numeric: normal; font-variant-east-asian: normal; font-weight: 300; font-stretch: normal; font-size: 32px; line-height: 1.4em; vertical-align: baseline; margin: 20px 0px; padding: 0px; letter-spacing: -1px; color: rgb(34, 34, 34);">VNC client on 200 lines of JavaScript</h1>
</header>
<section id="post-body" style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px; padding: 0px;">
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">In this quick blog post I&rsquo;ll show you how to create a simple VNC client in about 200 lines of JavaScript. For our goal we&rsquo;re going to use only HTML5 and JavaScript (client and server side). The end result will be something like this:</p>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;"><span style="font-family: inherit; font-size: inherit; font-style: inherit; font-variant-ligatures: inherit; font-variant-caps: inherit; font-weight: inherit;">So, let&rsquo;s begin!</span></p>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">Our application will have very simple architecture &ndash; a proxy server written in Node.js and a client in HTML5 and JavaScript. The Node.js server will stay between the browser and the VNC server. We need it because the client-side JavaScript does not supports TCP sockets so we can&rsquo;t connect directly to the VNC server. The HTML5 client will have a canvas on which we will draw the frames we receive from the server. For VNC server you can use the free version of&nbsp;<a href="http://www.realvnc.com/" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; text-decoration-line: none; color: rgb(86, 148, 241); transition: all 0.15s ease 0s; word-break: break-word; white-space: pre-wrap;">RealVNC</a>.</p>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">First lets start with the server. Make sure you have node.js installed. We will use four node modules:&nbsp;<a href="https://github.com/sidorares/node-rfb2" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; text-decoration-line: none; color: rgb(86, 148, 241); transition: all 0.15s ease 0s; word-break: break-word; white-space: pre-wrap;">rfb2</a>,&nbsp;<a href="https://npmjs.org/package/connect" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; text-decoration-line: none; color: rgb(86, 148, 241); transition: all 0.15s ease 0s; word-break: break-word; white-space: pre-wrap;">connect</a>,&nbsp;<a href="http://socket.io/" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; text-decoration-line: none; color: rgb(86, 148, 241); transition: all 0.15s ease 0s; word-break: break-word; white-space: pre-wrap;">socket.io</a>&nbsp;and&nbsp;<a href="https://github.com/pkrumins/node-png" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; text-decoration-line: none; color: rgb(86, 148, 241); transition: all 0.15s ease 0s; word-break: break-word; white-space: pre-wrap;">node-png</a>.</p>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">Enter the following commands in your terminal:</p>
<div class="highlight" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(77, 77, 76); border-radius: 3px;">
<pre class="chroma" style="box-sizing: border-box; font-size: 13px; overflow-wrap: break-word; -webkit-font-smoothing: subpixel-antialiased; padding: 10px; color: rgb(128, 128, 128); background-color: rgb(249, 249, 249); border: 0px; box-shadow: rgb(228, 235, 242) 0px 0px 0px 1px inset; border-radius: 4px; overflow: auto; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin-top: 0px; margin-bottom: 5px;"><code class="language-bash" data-lang="bash" style="box-sizing: border-box; padding: 0px; border: 0px; border-radius: 4px; overflow: scroll; font-family: Monaco, Courier, monospace; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin: 0px; box-shadow: none;"><span class="nb" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">cd</span> ~ mkdir js-vnc <span class="nb" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">cd</span> js-vnc npm init</code></pre>
</div>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">Now you should have folder called &ldquo;js-vnc&rdquo; with file named &ldquo;package.json&rdquo; in it. Use the following line of code to install almost all the dependencies:</p>
<div class="highlight" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(77, 77, 76); border-radius: 3px;">
<pre class="chroma" style="box-sizing: border-box; font-size: 13px; overflow-wrap: break-word; -webkit-font-smoothing: subpixel-antialiased; padding: 10px; color: rgb(128, 128, 128); background-color: rgb(249, 249, 249); border: 0px; box-shadow: rgb(228, 235, 242) 0px 0px 0px 1px inset; border-radius: 4px; overflow: auto; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin-top: 0px; margin-bottom: 5px;"><code class="language-bash" data-lang="bash" style="box-sizing: border-box; padding: 0px; border: 0px; border-radius: 4px; overflow: scroll; font-family: Monaco, Courier, monospace; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin: 0px; box-shadow: none;">npm install rfb2 connect socket.io --save</code></pre>
</div>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">Unfortunately node-png is not in the npm registry and we have to build it from source. Use:</p>
<div class="highlight" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(77, 77, 76); border-radius: 3px;">
<pre class="chroma" style="box-sizing: border-box; font-size: 13px; overflow-wrap: break-word; -webkit-font-smoothing: subpixel-antialiased; padding: 10px; color: rgb(128, 128, 128); background-color: rgb(249, 249, 249); border: 0px; box-shadow: rgb(228, 235, 242) 0px 0px 0px 1px inset; border-radius: 4px; overflow: auto; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin-top: 0px; margin-bottom: 5px;"><code class="language-bash" data-lang="bash" style="box-sizing: border-box; padding: 0px; border: 0px; border-radius: 4px; overflow: scroll; font-family: Monaco, Courier, monospace; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin: 0px; box-shadow: none;">sudo npm install -g node-gyp <span class="nb" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">cd</span> node_modules git clone git@github.com:pkrumins/node-png.git <span class="nb" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">cd</span> node-png node-gyp configure build</code></pre>
</div>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">and that was all&hellip;Now we can start creating our server. Let&rsquo;s include all the required modules and initialize an array which will contains all the connected clients. Create a file called &ldquo;server.js&rdquo; in your project base directory and add the following content in it:</p>
<div class="highlight" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(77, 77, 76); border-radius: 3px;">
<pre class="chroma" style="box-sizing: border-box; font-size: 13px; overflow-wrap: break-word; -webkit-font-smoothing: subpixel-antialiased; padding: 10px; color: rgb(128, 128, 128); background-color: rgb(249, 249, 249); border: 0px; box-shadow: rgb(228, 235, 242) 0px 0px 0px 1px inset; border-radius: 4px; overflow: auto; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin-top: 0px; margin-bottom: 5px;"><code class="language-javascript" data-lang="javascript" style="box-sizing: border-box; padding: 0px; border: 0px; border-radius: 4px; overflow: scroll; font-family: Monaco, Courier, monospace; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin: 0px; box-shadow: none;"><span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">var</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rfb</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">require</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'rfb2'</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">),</span>     <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">socketio</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">require</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'socket.io'</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">).</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">listen</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="mi" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(245, 135, 31);">8091</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">{</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">log</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">:</span> <span class="kc" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">false</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">}),</span>     <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">Png</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">require</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'./node_modules/node-png/build/Release/png'</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">).</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">Png</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span>     <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">connect</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">require</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'connect'</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">),</span>     <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">clients</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">[];</span> </code></pre>
</div>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">and now let&rsquo;s create a static directory for our static resources:</p>
<div class="highlight" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(77, 77, 76); border-radius: 3px;">
<pre class="chroma" style="box-sizing: border-box; font-size: 13px; overflow-wrap: break-word; -webkit-font-smoothing: subpixel-antialiased; padding: 10px; color: rgb(128, 128, 128); background-color: rgb(249, 249, 249); border: 0px; box-shadow: rgb(228, 235, 242) 0px 0px 0px 1px inset; border-radius: 4px; overflow: auto; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin-top: 0px; margin-bottom: 5px;"><code class="language-bash" data-lang="bash" style="box-sizing: border-box; padding: 0px; border: 0px; border-radius: 4px; overflow: scroll; font-family: Monaco, Courier, monospace; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin: 0px; box-shadow: none;">mkdir static</code></pre>
</div>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">now we can set the static directory of the connect server:</p>
<div class="highlight" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(77, 77, 76); border-radius: 3px;">
<pre class="chroma" style="box-sizing: border-box; font-size: 13px; overflow-wrap: break-word; -webkit-font-smoothing: subpixel-antialiased; padding: 10px; color: rgb(128, 128, 128); background-color: rgb(249, 249, 249); border: 0px; box-shadow: rgb(228, 235, 242) 0px 0px 0px 1px inset; border-radius: 4px; overflow: auto; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin-top: 0px; margin-bottom: 5px;"><code class="language-bash" data-lang="bash" style="box-sizing: border-box; padding: 0px; border: 0px; border-radius: 4px; overflow: scroll; font-family: Monaco, Courier, monospace; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin: 0px; box-shadow: none;">//creating new HTTP server. It will serve static files from the directory <span class="s2" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;./static&quot;</span> and will listen on <span class="m" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(245, 135, 31);">8090</span> port connect.createServer<span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">(</span>connect.static<span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">(</span><span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'./static'</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">))</span>.listen<span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">(</span><span class="m" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(245, 135, 31);">8090</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">)</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">;</span></code></pre>
</div>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">Now you can execute the following lines of code:</p>
<div class="highlight" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(77, 77, 76); border-radius: 3px;">
<pre class="chroma" style="box-sizing: border-box; font-size: 13px; overflow-wrap: break-word; -webkit-font-smoothing: subpixel-antialiased; padding: 10px; color: rgb(128, 128, 128); background-color: rgb(249, 249, 249); border: 0px; box-shadow: rgb(228, 235, 242) 0px 0px 0px 1px inset; border-radius: 4px; overflow: auto; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin-top: 0px; margin-bottom: 5px;"><code class="language-bash" data-lang="bash" style="box-sizing: border-box; padding: 0px; border: 0px; border-radius: 4px; overflow: scroll; font-family: Monaco, Courier, monospace; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin: 0px; box-shadow: none;"><span class="nb" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">echo</span> <span class="s2" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;Hello, world!&quot;</span> &gt; ./static/index.html node server.js</code></pre>
</div>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">Now open:&nbsp;<a href="http://localhost:8091/index.html" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; text-decoration-line: none; color: rgb(86, 148, 241); transition: all 0.15s ease 0s; word-break: break-word; white-space: pre-wrap;">http://localhost:8091/index.html</a>. If everything went well you should see the text: &ldquo;Hello, world!&rdquo;.</p>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">So far, so good! Now lets create a socket.io server. We want the client to connect to our proxy server and exchange data through socket.io with it. When the client is connected (i.e. the connection is established) it sends &ldquo;init&rdquo; message which contains the data required for the proxy server to connect to the VNC server &ndash; host, port and password. So let&rsquo;s handle these events:</p>
<div class="highlight" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(77, 77, 76); border-radius: 3px;">
<pre class="chroma" style="box-sizing: border-box; font-size: 13px; overflow-wrap: break-word; -webkit-font-smoothing: subpixel-antialiased; padding: 10px; color: rgb(128, 128, 128); background-color: rgb(249, 249, 249); border: 0px; box-shadow: rgb(228, 235, 242) 0px 0px 0px 1px inset; border-radius: 4px; overflow: auto; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin-top: 0px; margin-bottom: 5px;"><code class="language-javascript" data-lang="javascript" style="box-sizing: border-box; padding: 0px; border: 0px; border-radius: 4px; overflow: scroll; font-family: Monaco, Courier, monospace; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin: 0px; box-shadow: none;"><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">socketio</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">sockets</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">on</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'connection'</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">function</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">socket</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">)</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">{</span>   <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">socket</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">on</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'init'</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">function</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">config</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">)</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">{</span>     <span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">var</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">r</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">createRfbConnection</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">config</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">socket</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">);</span>     <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">socket</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">on</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'mouse'</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">function</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">evnt</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">)</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">{</span>       <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">r</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">pointerEvent</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">evnt</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">x</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">evnt</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">y</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">evnt</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">button</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">);</span>     <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">});</span>     <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">socket</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">on</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'keyboard'</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">function</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">evnt</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">)</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">{</span>       <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">r</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">keyEvent</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">evnt</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">keyCode</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">evnt</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">isDown</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">);</span>     <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">});</span>     <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">socket</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">on</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'disconnect'</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">function</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">()</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">{</span>       <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">disconnectClient</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">socket</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">);</span>     <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">});</span>   <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">});</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">});</span> </code></pre>
</div>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">We already listen for incoming connections with socket.io on port 8091 so now we just subscribe to the &ldquo;connection&rdquo; event. When the client connects to our socket.io server we subscribe the server to the &ldquo;init&rdquo; event. It&rsquo;s the message I told about earlier. Its parameters will contains data required for the proxy server to connect to the VNC server. In the callback associated with the &ldquo;init&rdquo; event we first create new RFB (remote framebuffer) connection. This method will return a RFB handler, we can use it to exchange data with the VNC server. After initialising the RFB connection we subscribe to three more events: &ldquo;mouse&rdquo;, &ldquo;keyboard&rdquo; and &ldquo;disconnect&rdquo;. The mouse event has parameter containing the position of the cursor and button state (1 for mouse down 0 for mouse up). For this demo we will support only the first mouse button. The keyboard event accepts as parameters the key code of the button which have triggered the event and flag which indicates whether the button is down or up. When the disconnect event happens we disconnect from the VNC server and release all the data for the current connection.</p>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">Here is posted the function createRfbConnection:</p>
<div class="highlight" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(77, 77, 76); border-radius: 3px;">
<pre class="chroma" style="box-sizing: border-box; font-size: 13px; overflow-wrap: break-word; -webkit-font-smoothing: subpixel-antialiased; padding: 10px; color: rgb(128, 128, 128); background-color: rgb(249, 249, 249); border: 0px; box-shadow: rgb(228, 235, 242) 0px 0px 0px 1px inset; border-radius: 4px; overflow: auto; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin-top: 0px; margin-bottom: 5px;"><code class="language-javascript" data-lang="javascript" style="box-sizing: border-box; padding: 0px; border: 0px; border-radius: 4px; overflow: scroll; font-family: Monaco, Courier, monospace; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin: 0px; box-shadow: none;"><span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">function</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">createRfbConnection</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">config</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">socket</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">)</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">{</span>   <span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">var</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">r</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rfb</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">createConnection</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">({</span>     <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">host</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">:</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">config</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">host</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span>     <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">port</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">:</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">config</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">port</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span>     <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">password</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">:</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">config</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">password</span>   <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">});</span>   <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">addEventHandlers</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">r</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">socket</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">);</span>   <span class="k" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">return</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">r</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">;</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">}</span> </code></pre>
</div>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">In the method &ldquo;addEventHandlers&rdquo; we add event handlers to the RFB handler we received from the &ldquo;createConnection&rdquo; method:</p>
<div class="highlight" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(77, 77, 76); border-radius: 3px;">
<pre class="chroma" style="box-sizing: border-box; font-size: 13px; overflow-wrap: break-word; -webkit-font-smoothing: subpixel-antialiased; padding: 10px; color: rgb(128, 128, 128); background-color: rgb(249, 249, 249); border: 0px; box-shadow: rgb(228, 235, 242) 0px 0px 0px 1px inset; border-radius: 4px; overflow: auto; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin-top: 0px; margin-bottom: 5px;"><code class="language-javascript" data-lang="javascript" style="box-sizing: border-box; padding: 0px; border: 0px; border-radius: 4px; overflow: scroll; font-family: Monaco, Courier, monospace; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin: 0px; box-shadow: none;"><span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">function</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">addEventHandlers</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">r</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">socket</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">)</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">{</span>   <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">r</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">on</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'connect'</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">function</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">()</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">{</span>     <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">socket</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">emit</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'init'</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">{</span>       <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">width</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">:</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">r</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">width</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span>       <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">height</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">:</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">r</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">height</span>     <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">});</span>     <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">clients</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">push</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">({</span>       <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">socket</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">:</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">socket</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span>       <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rfb</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">:</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">r</span>     <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">});</span>   <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">});</span>   <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">r</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">on</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'rect'</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">function</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rect</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">)</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">{</span>     <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">handleFrame</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">socket</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rect</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">r</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">);</span>   <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">});</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">}</span> </code></pre>
</div>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">When the RFB connection is established we send &ldquo;init&rdquo; event to the client (our browser) with the size of the screen. For simplicity we won&rsquo;t scale the screen in the browser. After sending the &ldquo;init&rdquo; event to the browser we add the client to our connected clients and subscribe to the event &ldquo;rect&rdquo;. The &ldquo;rect&rdquo; event will trigger when there is a screen update. For extra simplicity we will use raw encoding.</p>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">The last method from our Node.js proxy we will look at is the &ldquo;handleFrame&rdquo; method.</p>
<div class="highlight" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(77, 77, 76); border-radius: 3px;">
<pre class="chroma" style="box-sizing: border-box; font-size: 13px; overflow-wrap: break-word; -webkit-font-smoothing: subpixel-antialiased; padding: 10px; color: rgb(128, 128, 128); background-color: rgb(249, 249, 249); border: 0px; box-shadow: rgb(228, 235, 242) 0px 0px 0px 1px inset; border-radius: 4px; overflow: auto; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin-top: 0px; margin-bottom: 5px;"><code class="language-javascript" data-lang="javascript" style="box-sizing: border-box; padding: 0px; border: 0px; border-radius: 4px; overflow: scroll; font-family: Monaco, Courier, monospace; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin: 0px; box-shadow: none;"><span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">function</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">handleFrame</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">socket</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rect</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">r</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">)</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">{</span>   <span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">var</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rgb</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="k" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">new</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">Buffer</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rect</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">width</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">*</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rect</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">height</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">*</span> <span class="mi" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(245, 135, 31);">3</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'binary'</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">),</span>     <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">offset</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="mi" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(245, 135, 31);">0</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">;</span>    <span class="k" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">for</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">var</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">i</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="mi" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(245, 135, 31);">0</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">;</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">i</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">&lt;</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rect</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">data</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">length</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">;</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">i</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">+=</span> <span class="mi" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(245, 135, 31);">4</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">)</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">{</span>     <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rgb</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">[</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">offset</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">++</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">]</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rect</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">data</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">[</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">i</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">+</span> <span class="mi" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(245, 135, 31);">2</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">];</span>     <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rgb</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">[</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">offset</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">++</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">]</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rect</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">data</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">[</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">i</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">+</span> <span class="mi" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(245, 135, 31);">1</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">];</span>     <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rgb</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">[</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">offset</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">++</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">]</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rect</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">data</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">[</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">i</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">];</span>   <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">}</span>    <span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">var</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">image</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="k" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">new</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">Png</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rgb</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">r</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">width</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">r</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">height</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'rgb'</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">);</span>   <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">image</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">image</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">encodeSync</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">();</span>   <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">socket</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">emit</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'frame'</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">{</span>     <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">x</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">:</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rect</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">x</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span>     <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">y</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">:</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rect</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">y</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span>     <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">width</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">:</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rect</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">width</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span>     <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">height</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">:</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rect</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">height</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span>     <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">image</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">:</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">image</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">toString</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'base64'</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">)</span>   <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">});</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">}</span> </code></pre>
</div>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">We create new binary buffer with size &ldquo;rect.width * rect.height * 3&rdquo; and process the received pixmap. After that we create new PNG image from it by specifying its width, height and format (rgb). We encode the image and emit the event &ldquo;frame&rdquo; with parameters the coordinates of the image, its size and the actual image in base64 format.</p>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">And we&rsquo;re done with our server! There&rsquo;s one detail which I missed with purpose. In this version we don&rsquo;t use all the advantages of the RFB protocol. It has incremental frame transmitting which I&rsquo;ve omitted. RFB implementation with excluded incremental transmission can be downloaded from&nbsp;<a href="https://github.com/mgechev/node-rfb2" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; text-decoration-line: none; color: rgb(86, 148, 241); transition: all 0.15s ease 0s; word-break: break-word; white-space: pre-wrap;">here</a>.</p>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">And now our simple client!</p>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">Edit the content of the file ./static/index.html with the following content:</p>
<div class="highlight" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(77, 77, 76); border-radius: 3px;">
<pre class="chroma" style="box-sizing: border-box; font-size: 13px; overflow-wrap: break-word; -webkit-font-smoothing: subpixel-antialiased; padding: 10px; color: rgb(128, 128, 128); background-color: rgb(249, 249, 249); border: 0px; box-shadow: rgb(228, 235, 242) 0px 0px 0px 1px inset; border-radius: 4px; overflow: auto; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin-top: 0px; margin-bottom: 5px;"><code class="language-html" data-lang="html" style="box-sizing: border-box; padding: 0px; border: 0px; border-radius: 4px; overflow: scroll; font-family: Monaco, Courier, monospace; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin: 0px; box-shadow: none;"><span class="cp" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(142, 144, 140);">&lt;!DOCTYPE html&gt;</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">html</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>     <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">head</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>         <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">link</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rel</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;stylesheet&quot;</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">href</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;./css/bootstrap.min.css&quot;</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">/&gt;</span>         <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">link</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rel</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;stylesheet&quot;</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">href</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;./css/styles.css&quot;</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">/&gt;</span>     <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;/</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">head</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>     <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">body</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>         <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">div</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">class</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;form-wrapper&quot;</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">id</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;form-wrapper&quot;</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>             <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">form</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">class</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;form-horizontal&quot;</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">onsubmit</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;return false&quot;</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>               <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">div</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">class</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;control-group&quot;</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>                 <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">label</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">class</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;control-label&quot;</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">for</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;host&quot;</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>Host:<span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;/</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">label</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>                 <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">div</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">class</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;controls&quot;</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>                   <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">input</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">type</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;text&quot;</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">id</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;host&quot;</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">name</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;host&quot;</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">value</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;192.168.100.6&quot;</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">/&gt;&lt;</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">br</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">/&gt;</span>                 <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;/</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">div</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>               <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;/</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">div</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>               <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">div</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">class</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;control-group&quot;</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>                 <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">label</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">class</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;control-label&quot;</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">for</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;port&quot;</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>Port:<span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;/</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">label</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>                 <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">div</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">class</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;controls&quot;</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>                   <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">input</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">type</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;text&quot;</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">id</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;port&quot;</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">name</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;port&quot;</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">value</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;5900&quot;</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">/&gt;&lt;</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">br</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">/&gt;</span>                 <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;/</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">div</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>               <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;/</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">div</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>               <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">div</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">class</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;control-group&quot;</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>                 <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">label</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">class</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;control-label&quot;</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">for</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;port&quot;</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>Port:<span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;/</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">label</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>                 <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">div</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">class</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;controls&quot;</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>                   <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">input</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">type</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;password&quot;</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">id</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;password&quot;</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">name</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;password&quot;</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">value</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;paralaks&quot;</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">/&gt;&lt;</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">br</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">/&gt;</span>                 <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;/</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">div</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>               <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;/</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">div</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>               <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">div</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">class</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;control-group&quot;</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>                 <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">div</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">class</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;controls&quot;</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>                   <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">button</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">class</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;btn&quot;</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">id</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;loginBtn&quot;</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>Log in<span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;/</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">button</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>                 <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;/</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">div</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>               <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;/</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">div</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>             <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;/</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">form</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>         <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;/</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">div</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>         <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">canvas</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">id</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;screen&quot;</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>         <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;/</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">canvas</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>         <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">script</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">src</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;http://localhost:8091/socket.io/socket.io.js&quot;</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;&lt;/</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">script</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>         <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">script</span> <span class="na" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">src</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span><span class="s" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">&quot;./js/Client.js&quot;</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;&lt;/</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">script</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span>     <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;/</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">body</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&lt;/</span><span class="nt" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">html</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">&gt;</span></code></pre>
</div>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">We&rsquo;ve added simple bootstrap form and a canvas. Now create sub-directory of our project base directory: &ldquo;./static/js&rdquo; and create the file &ldquo;Client.js&rdquo; in it.</p>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">We will wrap the whole code in an IIFE to omit any globals. Let&rsquo;s create a simple object which will hold our settings:</p>
<div class="highlight" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(77, 77, 76); border-radius: 3px;">
<pre class="chroma" style="box-sizing: border-box; font-size: 13px; overflow-wrap: break-word; -webkit-font-smoothing: subpixel-antialiased; padding: 10px; color: rgb(128, 128, 128); background-color: rgb(249, 249, 249); border: 0px; box-shadow: rgb(228, 235, 242) 0px 0px 0px 1px inset; border-radius: 4px; overflow: auto; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin-top: 0px; margin-bottom: 5px;"><code class="language-javascript" data-lang="javascript" style="box-sizing: border-box; padding: 0px; border: 0px; border-radius: 4px; overflow: scroll; font-family: Monaco, Courier, monospace; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin: 0px; box-shadow: none;"><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">function</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">()</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">{</span>   <span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">var</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">Config</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">{</span>     <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">URL</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">:</span> <span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'http://localhost:8091'</span>   <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">};</span>   <span class="c1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(142, 144, 140);">//..more code here </span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">}());</span> </code></pre>
</div>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">Now lets add some code for initialisation after the &ldquo;Config&rdquo; declaration:</p>
<div class="highlight" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(77, 77, 76); border-radius: 3px;">
<pre class="chroma" style="box-sizing: border-box; font-size: 13px; overflow-wrap: break-word; -webkit-font-smoothing: subpixel-antialiased; padding: 10px; color: rgb(128, 128, 128); background-color: rgb(249, 249, 249); border: 0px; box-shadow: rgb(228, 235, 242) 0px 0px 0px 1px inset; border-radius: 4px; overflow: auto; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin-top: 0px; margin-bottom: 5px;"><code class="language-javascript" data-lang="javascript" style="box-sizing: border-box; padding: 0px; border: 0px; border-radius: 4px; overflow: scroll; font-family: Monaco, Courier, monospace; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin: 0px; box-shadow: none;"><span class="nb" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">document</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">getElementById</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'loginBtn'</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">).</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">addEventListener</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'click'</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">function</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">()</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">{</span>     <span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">var</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">screen</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="k" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">new</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">Screen</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="nb" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">document</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">getElementById</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'screen'</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">)),</span>       <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">client</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="k" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">new</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">Client</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">screen</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">);</span>      <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">client</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">connect</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">({</span>       <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">host</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">:</span> <span class="nb" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">document</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">getElementById</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'host'</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">).</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">value</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span>       <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">port</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">:</span> <span class="nb" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">parseInt</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="nb" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">document</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">getElementById</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'port'</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">).</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">value</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="mi" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(245, 135, 31);">10</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">),</span>       <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">password</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">:</span> <span class="nb" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">document</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">getElementById</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'password'</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">).</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">value</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span>       <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">callback</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">:</span> <span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">function</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">()</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">{</span>         <span class="nb" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">document</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">getElementById</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'form-wrapper'</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">).</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">classList</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">add</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'form-wrapper-hidden'</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">);</span>       <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">}</span>     <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">});</span>   <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">},</span> <span class="kc" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">false</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">);</span> </code></pre>
</div>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">We simply add event handler on click of the button with id &ldquo;loginBtn&rdquo;. In the callback we initialise new &ldquo;Screen&rdquo; object with our canvas as argument of the constructor function and create new &ldquo;Client&rdquo; with the Screen object as parameter. We call the connect method of the client with the specified parameters - host, port, password and a callback which will be invoked when the client is being connected.</p>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">This is the definition of the connect method:</p>
<div class="highlight" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(77, 77, 76); border-radius: 3px;">
<pre class="chroma" style="box-sizing: border-box; font-size: 13px; overflow-wrap: break-word; -webkit-font-smoothing: subpixel-antialiased; padding: 10px; color: rgb(128, 128, 128); background-color: rgb(249, 249, 249); border: 0px; box-shadow: rgb(228, 235, 242) 0px 0px 0px 1px inset; border-radius: 4px; overflow: auto; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin-top: 0px; margin-bottom: 5px;"><code class="language-javascript" data-lang="javascript" style="box-sizing: border-box; padding: 0px; border: 0px; border-radius: 4px; overflow: scroll; font-family: Monaco, Courier, monospace; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin: 0px; box-shadow: none;"><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">Client</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">prototype</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">connect</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">function</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">config</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">)</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">{</span>     <span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">var</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">self</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="k" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">this</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">;</span>     <span class="k" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">this</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">_socket</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">io</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">connect</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">Config</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">URL</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">);</span>     <span class="k" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">this</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">_socket</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">emit</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'init'</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">{</span>       <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">host</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">:</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">config</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">host</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span>       <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">port</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">:</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">config</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">port</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span>       <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">password</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">:</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">config</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">password</span>     <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">});</span>     <span class="k" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">this</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">_addHandlers</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">config</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">callback</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">);</span>     <span class="k" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">this</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">_initEventListeners</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">();</span>   <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">};</span> </code></pre>
</div>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">It creates new socket.io connection with the server&rsquo;s socket.io server host name and port and emits the &ldquo;init&rdquo; event we already talked about (contains data required for connection to the VNC server). After that we add handlers which will listen for events coming from the server - the &ldquo;init&rdquo; and &ldquo;rect&rdquo; event. Since the &ldquo;rect&rdquo; event is a bit more interesting we will look in its handling:</p>
<div class="highlight" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(77, 77, 76); border-radius: 3px;">
<pre class="chroma" style="box-sizing: border-box; font-size: 13px; overflow-wrap: break-word; -webkit-font-smoothing: subpixel-antialiased; padding: 10px; color: rgb(128, 128, 128); background-color: rgb(249, 249, 249); border: 0px; box-shadow: rgb(228, 235, 242) 0px 0px 0px 1px inset; border-radius: 4px; overflow: auto; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin-top: 0px; margin-bottom: 5px;"><code class="language-javascript" data-lang="javascript" style="box-sizing: border-box; padding: 0px; border: 0px; border-radius: 4px; overflow: scroll; font-family: Monaco, Courier, monospace; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin: 0px; box-shadow: none;"><span class="k" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">this</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">_socket</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">on</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'frame'</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">function</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">frame</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">)</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">{</span>     <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">that</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">_screen</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">drawRect</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">frame</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">);</span>   <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">});</span> </code></pre>
</div>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">As you see we simply delegate the drawing to the screen and pass it the frame as argument. And here is the actual drawing on the canvas:</p>
<div class="highlight" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(77, 77, 76); border-radius: 3px;">
<pre class="chroma" style="box-sizing: border-box; font-size: 13px; overflow-wrap: break-word; -webkit-font-smoothing: subpixel-antialiased; padding: 10px; color: rgb(128, 128, 128); background-color: rgb(249, 249, 249); border: 0px; box-shadow: rgb(228, 235, 242) 0px 0px 0px 1px inset; border-radius: 4px; overflow: auto; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin-top: 0px; margin-bottom: 5px;"><code class="language-javascript" data-lang="javascript" style="box-sizing: border-box; padding: 0px; border: 0px; border-radius: 4px; overflow: scroll; font-family: Monaco, Courier, monospace; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin: 0px; box-shadow: none;"><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">Screen</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">prototype</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">drawRect</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">function</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rect</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">)</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">{</span>     <span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">var</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">img</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="k" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">new</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">Image</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(),</span>       <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">that</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="k" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">this</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">;</span>     <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">img</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">width</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rect</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">width</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">;</span>     <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">img</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">height</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rect</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">height</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">;</span>     <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">img</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">src</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'data:image/png;base64,'</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">+</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rect</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">image</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">;</span>     <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">img</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">onload</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">function</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">()</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">{</span>       <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">that</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">_context</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">drawImage</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="k" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">this</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rect</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">x</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rect</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">y</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rect</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">width</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">rect</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">height</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">);</span>     <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">};</span>   <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">};</span> </code></pre>
</div>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">We create new image with the frame&rsquo;s width and height as dimensions and we set image&rsquo;s src to be equal to the frame&rsquo;s base64 image. After that, when the image is loaded we draw it onto the canvas.</p>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">The last interesting moment is the handling of the mouse and keyboard events. Of course we delegate it to the screen object:</p>
<div class="highlight" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(77, 77, 76); border-radius: 3px;">
<pre class="chroma" style="box-sizing: border-box; font-size: 13px; overflow-wrap: break-word; -webkit-font-smoothing: subpixel-antialiased; padding: 10px; color: rgb(128, 128, 128); background-color: rgb(249, 249, 249); border: 0px; box-shadow: rgb(228, 235, 242) 0px 0px 0px 1px inset; border-radius: 4px; overflow: auto; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin-top: 0px; margin-bottom: 5px;"><code class="language-javascript" data-lang="javascript" style="box-sizing: border-box; padding: 0px; border: 0px; border-radius: 4px; overflow: scroll; font-family: Monaco, Courier, monospace; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; vertical-align: baseline; margin: 0px; box-shadow: none;"><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">Client</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">prototype</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">_initEventListeners</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">function</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">()</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">{</span>     <span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">var</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">self</span> <span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">=</span> <span class="k" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">this</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">;</span>     <span class="k" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">this</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">_screen</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">addMouseHandler</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">function</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">x</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">y</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">button</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">)</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">{</span>       <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">self</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">_socket</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">emit</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'mouse'</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">{</span>         <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">x</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">:</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">x</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span>         <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">y</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">:</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">y</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span>         <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">button</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">:</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">button</span>       <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">});</span>     <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">});</span>     <span class="k" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">this</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">_screen</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">addKeyboardHandlers</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="kd" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(137, 89, 168);">function</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">code</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">isDown</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">)</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">{</span>       <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">self</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">_socket</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">.</span><span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">emit</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">(</span><span class="s1" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(113, 140, 0);">'keyboard'</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span> <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">{</span>         <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">keyCode</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">:</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">code</span><span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">,</span>         <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">isDown</span><span class="o" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(62, 153, 159);">:</span> <span class="nx" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(66, 113, 174);">isDown</span>       <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">});</span>     <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">});</span>   <span class="p" style="box-sizing: border-box; border: 0px; font: inherit; vertical-align: baseline; margin: 0px; padding: 0px; color: rgb(77, 77, 76);">};</span> </code></pre>
</div>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">As you see we add the mouse and keyboard event handlers and in the event callbacks we simply emit new socket.io events, respectively: &ldquo;mouse&rdquo; and &ldquo;keyboard&rdquo;, with their arguments. For simplicity our canvas is absolutely positioned and has coordinates (0, 0).</p>
<p style="box-sizing: border-box; border: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.7; font-family: inherit; vertical-align: baseline; margin: 0px 0px 5px; padding: 0px;">And&hellip;well&hellip;thats all! We have ready to go VNC client in just few lines of JavaScript!</p>
</section></article><footer id="footer" style="box-sizing: border-box; border: 0px; font-variant-numeric: inherit; font-variant-east-asian: inherit; font-stretch: inherit; font-size: 16px; line-height: inherit; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; vertical-align: baseline; margin: 100px 0px 0px; padding: 0px; color: rgb(102, 102, 102);"></footer>
